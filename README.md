# JraphQL
Java with GraphQL

* Maven [me.wener.jraphql](https://search.maven.org/#search%7Cga%7C1%7Cg%3A%22me.wener.jraphql%22)

Module | Description
-------|-----------
jrapgql-api | Minimal api that may required by others
jraphql-lang | GraphQL language representation<br> __Serializable__ - can parse or stringify to or from JSON<br> __Immutable__ - friendly to cache or precompile<br> __Builder__ - easy to build<br> __Pluggable__ - language representation is not related to parser impl
jraphql-runtime | GraphQL execution engine
jraphql-parser-antlr | Parser written in Antlr4 parse to jraphql-lang
jraphql-graphql-java-adapter | Adapter for [graphql-java/graphql-java](https://github.com/graphql-java/graphql-java)

## Example

### StarWar

* [StarWarApplication](./jraphql-runtime/src/test/java/me/wener/jraphql/example/StarWarApplication.java)
    * SpringBoot WebFlux based
    * start and visite http://localhost:8080
* [StarWarResolver](./jraphql-runtime/src/test/java/me/wener/jraphql/example/StarWarResolverV1.java)
    * resolve the StarWar schema. 

Queries you can try

```graphql
mutation addRev {
  createReview(episode: EMPIRE, review: {stars: 4, commentary: "Ok Good"}) {
    stars
    commentary
  }
}

query rev($e:Episode = EMPIRE) {
  hero(episode: $e) {
    id
    name
    appearsIn
  }
  reviews(episode: $e) {
    stars
    commentary
  }
}

query search {
  search(text: "o") {
    __typename
    ... on Human {
      id
      name
    }
    ... on Droid {
      primaryFunction
    }
    ... on Starship {
      length
    }
  }
}

query baseQuery {
  starship(id: "3000") {
    id
    name
    length(unit: FOOT)
  }
  character(id: "2000") {
    id
    ... on Human {
      mass
      starships {
        name
      }
    }
    ... on Droid {
      name
      appearsIn
    }
  }
  human(id: "1003") {
    friendsConnection(after: "1002") {
      friends {
        name
      }
      pageInfo {
        hasNextPage
        startCursor
        endCursor
      }
    }
    friends {
      name
    }
  }
}
```

### Embedded Schema

JraphQL Runtime contain a embedded schema [MetaSchema](./jraphql-runtime/src/main/java/me/wener/jraphql/schema/MetaSchema.java), generated by [EmbededSchema](./jraphql-runtime/src/test/java/me/wener/jraphql/example/EmbededSchema.java).   

* Parse Schema
* Serialize to JSON
* Best compress GZip
* Encode use mime base64
* Original JSON 32631 byte -> Encoded Base64 5352 byte

## Work with GoaphQL
[GoaphQL](https://github.com/wenerme/goaphql) can generate code from schema that depends on jrapgql-api, can directly run on jraphql-graphql-java-adapter.  

The generated code is static type and full featured, everything is an interface.
